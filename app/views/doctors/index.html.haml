-# = render './layouts/shared/menu'


.pusher
  %div.main.ui.container
    %h1.ui.header.blue Listado de Doctores

    .ui.form.input.segment
      -# = form_tag doctors_path, :method => 'get' do
      -#   = text_field_tag :search, params[:search], :placeholder => "Nombre..."
      -#   = submit_tag "Buscar", :name => nil, :class => "ui primary basic button"
      = search_form_for @q do |f|
        .three.fields
          .field
            = f.label :firstname_or_lastname_cont, 'Nombre'
            = f.search_field :firstname_or_lastname_cont
          .field
            = f.label :center_name_cont, 'Centro'
            = f.search_field :center_name_cont

        = f.submit "Buscar", :class => "ui blue submit button"

    %table.ui.sortable.celled.table.striped.definition
      %thead
        %tr
          %th
          %th Nombres
          %th Apellidos
          %th Categoría
          %th Centro
          %th Acciones

      %tbody
        - @doctors.each do |doctor|
          %tr
            %td.collapsing
              %div.ui.fitted
                = doctor.speciality
            %td= doctor.firstname
            %td= doctor.lastname
            %td= doctor.category
            %td= doctor.center.name if doctor.center
            %td.collapsing.positive
              = link_to 'Ver', doctor, class: "ui brown basic submit button"
              = link_to 'Editar', edit_doctor_path(doctor), class: "ui blue basic submit button"
              = link_to 'Eliminar', doctor, :method => :delete,
                                            class: "ui red basic submit button",
                                            :data => { :confirm => '¿Está seguro…?' }

              -# .ui.fitted
              -#   %a{:href => doctor_path(doctor)}
              -#     Show
      -# = will_paginate @doctors, previous_label: "Anterior", next_label: "Siguiente"
      -# = will_paginate @doctors, renderer: WillPaginateSemanticUi::ActionView::Renderer
      = will_paginate @doctors, renderer: WillPaginateSemanticUi::ActionView::Renderer, class: "right floated", inner_window: 3



      -# %tfoot
      -#   %tr
      -#     %th
      -#       Total:
      -#       = @doctors.count
      -#     %th
      -#     %th
    %br
    - if params[:search]
      = link_to doctors_path, class: "ui blue basic submit button" do
        %i.big.icons
          %i.reply.icon
        = 'Volver'
    = link_to new_doctor_path, class: "ui blue basic submit button" do
      %i.big.icons
        %i.doctor.icon
        %i.corner.add.icon
      = 'Nuevo Doctor'
